# README
```
date :2021-03-21
(c) woodie2wopper
```

## 機能

- ファイル名とディレクトリの並びからメーカと機種を推定し、ファイルタイムスタンプからファイル名の先頭にF666形式の録音開始時間と終了時間を追加した文字列を出力します。
- ファイル名は変更しません。ファイル名の変更は出力結果を`mv`などで変更してください。
- 時差がある場合、録音時間と終了時間を時差分だけ遅らせるあるいは早めることができます。
- 推定メーカ名を表示できます。
- 20文字以降は2文字の機種名がセパレータで区切られ元のファイル名が保存されます。
- 拡張子は小文字に変換されます。
- logファイルが生成されます。場所は``\$HOME/log`です。

## F666形式

- ３つ６桁の数字がセパレータで並んだ２０文字から始まるファイル名のフォーマットのことです。
- セパレータは一つ目がアンダースコア(\_)、２つめがハイフン(-)です。
- 例：2021年1月2日午後0時34分56秒から１時間録音されたファイルのF666形式は"210102_123456-133456"になります。

## 使い方

- Macintoshのターミナルで使うことを想定しています。
- awk/sed/coreutils/soxをbrewなどでまずインストールしてください。


## tools

|tool|Version|
|---|---------|
|awk|GNU Awk 5.1.0, API: 3.0 (GNU MPFR 4.1.0, GNU MP 6.2.1)|
|sed| (GNU sed) 4.8|
|ls| (GNU coreutils) 8.32|
|soxi|SoX v|
|bash|GNU bash, バージョン 5.1.0(1)-release (x86_64-apple-darwin18.7.0)|

## usage

### 引数なしで実行

```{bash}
$ FileStamp_to_f666.bash 
  USAGE: FileStamp_to_f666.bash 030A_151204_1640.WAV [ifs|ifn] -090000 [show_org|-] show_maker
 
  機能：1. 音源をファイルスタンプベースに666フォーマットのファイル名で返す
        2. 拡張子は小文字にする
        3. 機器情報などlogファイルを出力します。場所は$HOME/log です。
        4. ファイル名が同じフォーマットの場合、デバイス名をディレクトリ名から取得します。その場合、デバイス名はフルパスの2つ目のディレクトリと仮定しています
        5. オプションは順番通りに設定してください。[a|b]はaかbかの意味です。
  OPT : [ifs|ifn]はファイルのタイムスタンプあるいかファイル名の時刻を無視する(Ignore File Stamp/Ignore File Name)
  OPT : [timediff] 時差 : %H%M%Sで入力してください
  OPT : [show_org] オリジナルファイルを表示します。
  OPT : [show_maker] メーカ情報を表示します
```

### ファイル名の変更

```{bash}
FileStamp_to_f666.bash LS001.WAV | xargs -I{} mv LS001.WAV {} 
```



---

2021 toriR lab.